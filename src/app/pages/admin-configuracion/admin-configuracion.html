<div class="container mt-5 mb-5">
    
    <div class="d-flex justify-content-between align-items-center mb-5">
        <h2 class="texto-nordico fw-bold m-0">
            <i class="bi bi-gear-wide-connected me-2"></i>Configuración Global
        </h2>
        <button class="btn btn-outline-secondary rounded-3" routerLink="/home">
            <i class="bi bi-arrow-left me-1"></i> Volver al Inicio
        </button>
    </div>

    <div *ngIf="mensaje" class="alert alert-success border-0 shadow-sm rounded-3 mb-4">
        <i class="bi bi-check-circle-fill me-2"></i> {{ mensaje }}
    </div>
    <div *ngIf="error" class="alert alert-danger border-0 shadow-sm rounded-3 mb-4">
        <i class="bi bi-exclamation-triangle-fill me-2"></i> {{ error }}
    </div>

    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card tarjeta-nordica p-4">
                
                <h5 class="texto-nordico fw-bold mb-4 border-bottom pb-3">
                    <i class="bi bi-wallet2 me-2"></i>Comisión de la Plataforma
                </h5>

                <div class="card-body p-0">
                    
                    <div class="text-center mb-4 py-4 bg-light rounded-3 border border-dashed">
                        <small class="text-secondary text-uppercase fw-bold ls-1 d-block mb-1">Porcentaje Actual</small>
                        <h1 class="display-3 fw-bold text-nordico-claro m-0">
                            {{ config.comisionGlobalActual }}<span class="fs-4 text-muted">%</span>
                        </h1>
                    </div>

                    <p class="text-muted small mb-4 text-center px-3">
                        Este valor se aplica por defecto a todas las transacciones.
                        <br>
                        <span class="text-warning fw-bold"><i class="bi bi-info-circle me-1"></i> Nota:</span> 
                        Si reduces este valor, las empresas con comisiones superiores se ajustarán automáticamente.
                    </p>

                    <form (ngSubmit)="guardarCambios()">
                        <div class="mb-4">
                            <label class="form-label small fw-bold text-secondary text-uppercase">Definir Nuevo Valor</label>
                            <div class="input-group shadow-sm rounded-3 overflow-hidden">
                                <input type="number" class="form-control form-control-lg border-0 bg-light" 
                                    [(ngModel)]="nuevaComision" name="comision" 
                                    min="0" max="100" step="0.01" required placeholder="0.00">
                                <span class="input-group-text border-0 bg-light text-muted">
                                    <i class="bi bi-percent"></i>
                                </span>
                            </div>
                        </div>

                        <div class="d-grid">
                            <button type="submit" class="btn boton-nordico rounded-3 py-2 fw-bold shadow-sm"
                                [disabled]="nuevaComision === config.comisionGlobalActual">
                                <i class="bi bi-save me-2"></i> Guardar Configuración
                            </button>
                        </div>
                    </form>

                    <div class="mt-4 pt-3 border-top text-center" *ngIf="config.fechaModificacion">
                        <small class="text-muted fst-italic">
                            <i class="bi bi-clock-history me-1"></i> 
                            Última modificación: {{ config.fechaModificacion }}
                        </small>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>